x
### Initiate Climodr ###
climodr::hubs("C:/Users/Alexander/Documents/Universit채t/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Universit채t/HiWi/Test/data/Output/")
climodr::envi.create("C:/Users/Alexander/Documents/Universit채t/HiWi/Test/data/")
### Initiate Climodr ###
climodr::hubs("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Output/")
climodr::envi.create("C:/Users/Alexander/Documents/Universit채t/HiWi/Test/data/")
climodr::envi.create("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/")
x <- climodr::crop.all(method = "Input", safe_output = TRUE)
terra::plot(x[1,2])
terra::plot(x[1])
terra::plot(x[[1])
terra::plot(x[[1]])
terra::plot(x[[1:3]])
terra::plot(x[[1:4]])
unlink("vignettes/climodr-vignette_cache", recursive = TRUE)
climodr::check.csv(method = "proc", safe_output = TRUE)
csv_list <- list();
all_files_in_distribution <- list.files(path = Input, recursive = T); #reads all data in Input-Folder
csv_paths <- grep(".csv$", all_files_in_distribution, value=TRUE);
number_of_csvs <- length(csv_paths);
i = 1
csv_data <- read.csv(paste0(Input, csv_paths[[i]]))
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
csv_data$daymonth <- strftime(csv_data$cn_data[2], format = "%m-%d")
csv_data$cn_data[2]
csv_data$(cn_data[2])
csv_data$paste0(cn_data[2])
csv_data$datetime
csv_data[,2]
csv_data$daymonth <- strftime(csv_data[,2], format = "%m-%d")
csv_data$year<- strftime(csv_data[,2], format = "%y")
csv_data$month <- strftime(csv_data[,2], format = "%m")
csv_data$day <- strftime(csv_data[,2], format = "%d")
csv_data <- csv_data[, c(cn_data[1,2], "daymonth", "year", "month", "day", cn_data[3:number_of_cn])]
cn_data[1,2]
cn_data(1,2)
cn_data
cn_data[1]
cn_data[1;2]
cn_data[1:2]
csv_data <- csv_data[, c(cn_data[1:2], "daymonth", "year", "month", "day", cn_data[3:number_of_cn])]
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, paste0("m",cn_data[j]) = ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
cn_data[7]
paste0("m",cn_data[j])
paste0("m",cn_data[7])
csv_data <- transform(csv_data, paste0("m",cn_data[j]) <- ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, paste0("m",cn_data[j]) <- ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
csv_data <- transform(csv_data, cn_data(j) <- ifelse(is.na(cn_data[j]), paste0("m",cn_data[j]), cn_data[j]))
csv_data$paste0("m",cn_data[j]) <- NULL
}
View(x)
x <- NULL
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, paste0("m",cn_data[j]) <- ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
csv_data <- transform(csv_data, cn_data(j) <- ifelse(is.na(cn_data[j]), paste0("m",cn_data[j]), cn_data[j]))
csv_data$paste0("m",cn_data[j]) <- NULL
}
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, paste0("m",cn_data[j]) = ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
csv_data <- transform(csv_data, paste0("m",cn_data[j]) == ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
warnings()
View(csv_data)
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, paste0("m",cn_data[j]) == ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
csv_data <- transform(csv_data, cn_data(j) == ifelse(is.na(cn_data[j]), paste0("m",cn_data[j]), cn_data[j]))
csv_data$paste0("m",cn_data[j]) <- NULL
}
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, paste0("m",cn_data[j]) == ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
csv_data <- transform(csv_data, cn_data[j] == ifelse(is.na(cn_data[j]), paste0("m",cn_data[j]), cn_data[j]))
csv_data$paste0("m",cn_data[j]) <- NULL
}
?transform
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, paste0("m",cn_data[j]) == ave(cn_data[j], daymonth, FUN = function(y) mean (y, na.rm = TRUE)))
csv_data <- transform(csv_data, cn_data[j] == ifelse(is.na(cn_data[j]), paste0("m",cn_data[j]), cn_data[j]))
csv_data$paste0("m",cn_data[j]) <- NULL
}
warnings(1)
?ave
?mean
j <- 7
ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE))
ave(cn_data[j], csv_data[,3], FUN = function(x) mean (x, na.rm = TRUE))
ave(cn_data[j], csv_data[,3], FUN = function(y) mean (y, na.rm = TRUE))
ave(cn_data[j], csv_data[,3], FUN = function(x) mean (x))
function(x) mean (x, na.rm = TRUE)
FUN = function(x) mean (x, na.rm = TRUE)
View(FUN)
# Type: script
# Name: 02-template_script.R
# Author: Seda Bekar
# Description: set necessary variables and calls setup
# Dependencies: 01-bale_setup.R
# Output: list of pathes
# Copyright: Seda Bekar
#------------------------------------------------------------------------------
# 0 - specific setup
#-----------------------------
require(envimaR)
# MANDANTORY: defining the root folder, DO NOT change this line:
rootDIR = "C:/Users/Alexander/Documents/GitHub/bale_aws/bekar"
plots_tubeDB <- read.csv(file.path(envrmt$path_data, "plots_tubeDB.csv"))
# MANDANTORY: calling the setup script also DO NOT change this line:
source(file.path(envimaR::alternativeEnvi(root_folder = rootDIR),"01-src/01-bale_setup.R"),echo = TRUE)
plots_tubeDB <- read.csv(file.path(envrmt$path_data, "plots_tubeDB.csv"))
BALE001_tubeDB <- data.frame(plots_tubeDB[c(1:45235), ]) # adjust the number of BALE001 to your dataset
BALE001_tubeDB$daymonth <- strftime(BALE001_tubeDB$datetime, format = "%m-%d")
BALE001_tubeDB$year<- strftime(BALE001_tubeDB$datetime, format = "%y")
BALE001_tubeDB$month <- strftime(BALE001_tubeDB$datetime, format = "%m")
BALE001_tubeDB$day <- strftime(BALE001_tubeDB$datetime, format = "%d")
BALE001_tubeDB <- BALE001_tubeDB[, c("plot", "datetime", "daymonth", "year","month","day",
"Ta_200","Ta_200_min","Ta_200_max","rH_200","rH_200_min",
"rH_200_max","SWDR_200","P_RT_NRT")]
######### mta_200 #############
BALE001_tubeDB <- transform(BALE001_tubeDB, mta_200 = ave(Ta_200, daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
BALE001_tubeDB <- transform(BALE001_tubeDB, Ta_200 = ifelse(is.na(Ta_200), mta_200, Ta_200))
View(BALE001_tubeDB)
?transform
######### mta_200 #############
BALE001_tubeDB <- data.table::transform(BALE001_tubeDB, mta_200 = ave(Ta_200, daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
cn_data[j]
#install climodr
#devtools::install_github("envima/climodr")
devtools::load_all()
library(climodr)
#install climodr
#devtools::install_github("envima/climodr")
devtools::load_all()
#install climodr
#devtools::install_github("envima/climodr")
devtools::load_all()
library(climodr)
#setting up the environment for climodr
climodr::hubs("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Output/")
climodr::envi.create("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/")
tempdir()
csv_data <- read.csv(paste0(Input, csv_paths[[i]]))
all_files_in_distribution <- list.files(path = Input, recursive = T); #reads all data in Input-Folder
csv_paths <- grep(".csv$", all_files_in_distribution, value=TRUE);
number_of_csvs <- length(csv_paths);
i=1
j=7
csv_data <- read.csv(paste0(Input, csv_paths[[i]]))
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
csv_data$daymonth <- strftime(csv_data[,2], format = "%m-%d")
csv_data$year<- strftime(csv_data[,2], format = "%y")
csv_data$month <- strftime(csv_data[,2], format = "%m")
csv_data$day <- strftime(csv_data[,2], format = "%d")
csv_data <- csv_data[, c(cn_data[1:2], "daymonth", "year", "month", "day", cn_data[3:number_of_cn])]
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
csv_data <- transform(csv_data, paste0("m",cn_data[j]) == ave(cn_data[j], daymonth, FUN = function(x) mean (x, na.rm = TRUE)))
?warnings
warnings()
daymonth
cn_data[j]
daymonth
ave(cn_data[j], daymonth)
ave(cn_data[j], daymonth, FUN = function(x) mean
)
ave(cn_data[j], daymonth, FUN = function(x) mean(x))
ave(cn_data[j], csv_data$daymonth, FUN = function(x) mean(x))
ave(cn_data[j], csv_data$daymonth, FUN = function(x) mean(x, na.rm = TRUE))
warnings
warnings()
csv_data <- transform(csv_data, paste0("m",cn_data[j]) == ave(cn_data[j], csv_data$daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data <- transform(csv_data, cn_data[j] == ifelse(is.na(cn_data[j]), paste0("m",cn_data[j]), cn_data[j]))
View(csv_data)
csv_data <- transform(csv_data, paste0("m",cn_data[j]) = ave(cn_data[j], csv_data$daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data <- base::transform(csv_data, paste0("m",cn_data[j]) = ave(cn_data[j], csv_data$daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data <- transform(csv_data, temp_col = ave(cn_data[j], csv_data$daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data <- transform(csv_data, temp_col = ave(csv_data[j], csv_data$daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data <- transform(csv_data, temp_col = ave(csv_data[j], daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
warnings()
csv_data <- transform(csv_data, temp_col = ave(csv_data[j], csv_data$daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data[j]
csv_data[,j]
csv_data$Ta_200
csv_data <- transform(csv_data, temp_col = ave(csv_data[,j], csv_data$daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data <- transform(csv_data, temp_col = ave(csv_data[,j], daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data <- transform(csv_data, csv_data[,j] = ifelse(is.na(csv_data[,j]), temp_col, csv_data[,j]))
csv_data[,j]
ifelse(is.na(csv_data[,j]), temp_col, csv_data[,j])
View(csv_data)
ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j])
csv_data <- transform(csv_data, csv_data[,j] = ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j]))
View(csv_data)
is.na(csv_data[,j])
csv_data$temp_col
csv_data <- transform(csv_data, cn_data[j] = ifelse(is.na(csv_data[,j]), temp_col, csv_data[,j]))
csv_data <- transform(csv_data, cn_data[j] <- ifelse(is.na(csv_data[,j]), temp_col, csv_data[,j]))
transform(csv_data, cn_data[j] = ifelse(is.na(csv_data[,j]), temp_col, csv_data[,j]))
lenght(is.na(csv_data[,j]))
length(is.na(csv_data[,j]))
length(temp_col)
length(csv_data$temp_col)
length(csv_data[,j]))
length(csv_data[,j])
ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j])
cn_data[j]
length(csv_data[,j]))
length(csv_data[,j])
csv_data <- transform(csv_data, csv_data[,j] = ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j]))
csv_data <- transform(csv_data, csv_data[,j] == ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j]))
View(csv_data)
csv_data$temp_col <- NULL
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, temp_col = ave(csv_data[,j], daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data <- transform(csv_data, csv_data[,j] == ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j]))
csv_data$temp_col <- NULL
}
View(csv_data)
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, temp_col = ave(csv_data[,j], daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data[,j] <- ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j])
csv_data$temp_col <- NULL
}
View(csv_data)
csv_data$daymonth <- NULL
climodr::check.csv(method = "proc", safe_output = TRUE)
#install climodr
#devtools::install_github("envima/climodr")
devtools::load_all()
library(climodr)
climodr::check.csv(method = "proc", safe_output = TRUE)
paste0(csv_paths[[i]], "_no_NAs.csv")
paste0("csv_",[[i]], "_no_NAs.csv"
paste0("csv_", i, "_no_NAs.csv")
else {
file.path(envrmt$path_data, paste0("csv_", i, "_no_NAs.csv"))
#clean environment
rm(list=ls())
#session restart
.rs.restartR()
#remove plots_tubeDB
dev.off()
# 0 - specific setup
#-----------------------------
require(envimaR)
# MANDANTORY: defining the root folder, DO NOT change this line:
rootDIR = "C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input"
devtools::load_all()
climodr::hubs("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Output/")
climodr::hubs(paste0(rootDIR, "Input/"),
)
climodr::hubs(paste0(rootDIR, "Input/"),
paste0(rootDIR, "Output/")
)
# MANDANTORY: defining the root folder, DO NOT change this line:
rootDIR = "C:/Users/Alexander/Documents/Uni/HiWi/Test/data"
climodr::hubs(paste0(rootDIR, "Input/"),
paste0(rootDIR, "Output/")
)
# MANDANTORY: defining the root folder, DO NOT change this line:
rootDIR = "C:/Users/Alexander/Documents/Uni/HiWi/Test/data/"
climodr::hubs(paste0(rootDIR, "Input/"),
paste0(rootDIR, "Output/")
)
Bale_tubeDB <- read.csv(paste0(Input, "plots_tubeDB.csv"))
which(Bale_tubeDB$plot == "BALE001")
sum(which(Bale_tubeDB$plot == "BALE001"))
length(which(Bale_tubeDB$plot == "BALE001"))
Bale_tubeDB$plot == "BALE001"
Bale_tubeDB$plot == "BALE001"[1]
(Bale_tubeDB$plot == "BALE001")[1]
(Bale_tubeDB$plot == "BALE001")
(Bale_tubeDB$plot == "BALE001")[[1]]
which(Bale_tubeDB$plot == "BALE001")[[1]]
which(Bale_tubeDB$plot == "BALE002")[[1]]
v <- c(001, 002, 003, 004, 005, 006, 007, 008, 009, 010)
v
v <- seq(001,010)
v
v <- c("001", "002", "003", "004", "005", "006", "007", "008", "009", "010")
for (i in v){
x <- data.frame(plots_tubeDB[c(which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]:length(which(Bale_tubeDB$plot == paste0("BALE", i)))), ])
write.csv(x, paste0(Output, "BALE", i))
}
for (i in v){
x <- data.frame(Bale_tubeDB[c(which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]:length(which(Bale_tubeDB$plot == paste0("BALE", i)))), ])
write.csv(x, paste0(Output, "BALE", i))
}
for (i in v){
x <- data.frame(Bale_tubeDB[c(which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]:length(which(Bale_tubeDB$plot == paste0("BALE", i)))), ])
write.csv(x, paste0(Output, "BALE", i, ".csv"), overwright = TRUE)
}
write.csv(x, paste0(Output, "BALE", i, ".csv"))
for (i in v){
x <- data.frame(Bale_tubeDB[c(which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]:length(which(Bale_tubeDB$plot == paste0("BALE", i)))), ])
write.csv(x, paste0(Output, "BALE", i, ".csv"))
}
which(Bale_tubeDB$plot == paste0("BALE", i))
i = 5
i = "005"
which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]
length(which(Bale_tubeDB$plot == paste0("BALE", i)))
tail(which(Bale_tubeDB$plot == paste0("BALE", i)))
tail(which(Bale_tubeDB$plot == paste0("BALE", i)), n=1)
for (i in v){
x <- data.frame(Bale_tubeDB[c(which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]:tail(which(Bale_tubeDB$plot == paste0("BALE", i))), n = 1), ])
write.csv(x, paste0(Output, "BALE", i, ".csv"))
}
tail(which(Bale_tubeDB$plot == paste0("BALE", i)), n = 1)
for (i in v){
x <- data.frame(Bale_tubeDB[c(which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]:tail(which(Bale_tubeDB$plot == paste0("BALE", i)), n = 1)), ])
write.csv(x, paste0(Output, "BALE", i, ".csv"))
}
?aggregate
devtools::load_all()
### Initiate Climodr ###
climodr::hubs("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Output/")
climodr::envi.create("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/")
proc.csv(method = "all", safe_output = TRUE)
csv_list <- list();
all_files_in_distribution <- list.files(path = Input, recursive = T); #reads all data in Input-Folder
csv_paths <- grep(".csv$", all_files_in_distribution, value=TRUE);
number_of_csvs <- length(csv_paths);
for (i in number_of_csvs){
x <- read.csv(file.path(Input, "csv_", i, "no_NAs.csv"))
cn_x <- colnames(x)
number_of_cn <- length(cn_x)
for (j in number_of_cn){
paste0("mm_", cn_x[j]) <- aggregate(cn_x[j] ~ month + year, x, mean)
colnames(paste0("mm_", cn_x[j])) <- c("month","year",paste0("monthly_mean_", cn_x[j]))
paste0("mm_", cn_x[j])$plot <- x[[1]]
}
i=1
csv_data <- read.csv(paste0(Input, csv_paths[[i]]))
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
csv_data$daymonth <- strftime(csv_data[,2], format = "%m-%d")
csv_data[,2]
csv_data <- read.csv(paste0(Input, csv_paths[[i]]))
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
csv_data$daymonth <- strftime(csv_data[,2], format = "%m-%d")
cn_data
csv_data <- read.csv(paste0(Input, csv_paths[[i]]), sep = ",")
### Initiate Climodr ###
climodr::hubs("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Output/")
climodr::envi.create("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/")
csv_list <- list();
all_files_in_distribution <- list.files(path = Input, recursive = T); #reads all data in Input-Folder
csv_paths <- grep(".csv$", all_files_in_distribution, value=TRUE);
number_of_csvs <- length(csv_paths);
csv_data <- read.csv(paste0(Input, csv_paths[[i]]), sep = ",")
i=1
csv_data <- read.csv(paste0(Input, csv_paths[[i]]), sep = ",")
read.csv()
?read.csv
Bale_tubeDB <- read.csv(paste0(Input, "plots_tubeDB.csv"))
v <- c("001", "002", "003", "004", "005", "006", "007", "008", "009", "010")
for (i in v){
x <- data.frame(Bale_tubeDB[c(which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]:tail(which(Bale_tubeDB$plot == paste0("BALE", i)), n = 1)), ])
write.csv(x, paste0(Output, "BALE", i, ".csv"))
}
csv_list <- list();
all_files_in_distribution <- list.files(path = Input, recursive = T); #reads all data in Input-Folder
csv_paths <- grep(".csv$", all_files_in_distribution, value=TRUE);
number_of_csvs <- length(csv_paths);
i = 1
csv_data <- read.csv(paste0(Input, csv_paths[[i]]), sep = ",")
View(csv_data)
?write.csv
v <- c("001", "002", "003", "004", "005", "006", "007", "008", "009", "010")
for (i in v){
x <- data.frame(Bale_tubeDB[c(which(Bale_tubeDB$plot == paste0("BALE", i))[[1]]:tail(which(Bale_tubeDB$plot == paste0("BALE", i)), n = 1)), ])
write.csv(x, paste0(Output, "BALE", i, ".csv"), row.names = FALSE)
}
csv_list <- list();
all_files_in_distribution <- list.files(path = Input, recursive = T); #reads all data in Input-Folder
csv_paths <- grep(".csv$", all_files_in_distribution, value=TRUE);
number_of_csvs <- length(csv_paths);
i = 1
csv_data <- read.csv(paste0(Input, csv_paths[[i]]), sep = ",")
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
csv_data$daymonth <- strftime(csv_data[,2], format = "%m-%d")
devtools::load_all()
proc.csv(method = "all", safe_output = TRUE)
csv_data$year<- strftime(csv_data[,2], format = "%y")
csv_data$month <- strftime(csv_data[,2], format = "%m")
csv_data$day <- strftime(csv_data[,2], format = "%d")
csv_data <- csv_data[, c(cn_data[1:2], "daymonth", "year", "month", "day", cn_data[3:number_of_cn])]
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, temp_col = ave(csv_data[,j], daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data[,j] <- ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j])
csv_data$temp_col <- NULL
}
csv_data$daymonth <- NULL
if (safe_output == TRUE){
write_csv(csv_data, file.path(Output, csv_paths[[i]], "_no_NAs.csv"))
}
safe_output=TRUE
if (safe_output == TRUE){
write_csv(csv_data, file.path(Output, csv_paths[[i]], "_no_NAs.csv"))
}
paste0(Output, csv_paths[[i]], "_no_NAs.csv")
csv_data[[1]]
csv_data[[1,1]]
if (safe_output == TRUE){
write_csv(csv_data, paste0(Output, csv_data[[1]], "_no_NAs.csv"))
}
write_csv(csv_data, paste0(Output, csv_data[[1]], "_no_NAs.csv"))
paste0(Output, csv_data[[1]], "_no_NAs")
if (safe_output == TRUE){
write_csv(csv_data, paste0(Output, csv_data[[1,1]], "_no_NAs"))
}
for (i in 1:number_of_csvs){
csv_data <- read.csv(paste0(Input, csv_paths[[i]]), sep = ",")
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
csv_data$daymonth <- strftime(csv_data[,2], format = "%m-%d")
csv_data$year<- strftime(csv_data[,2], format = "%y")
csv_data$month <- strftime(csv_data[,2], format = "%m")
csv_data$day <- strftime(csv_data[,2], format = "%d")
csv_data <- csv_data[, c(cn_data[1:2], "daymonth", "year", "month", "day", cn_data[3:number_of_cn])]
cn_data <- colnames(csv_data)
number_of_cn <- length(cn_data)
for (j in 7:number_of_cn){
csv_data <- transform(csv_data, temp_col = ave(csv_data[,j], daymonth, FUN = function(x) mean(x, na.rm = TRUE)))
csv_data[,j] <- ifelse(is.na(csv_data[,j]), csv_data$temp_col, csv_data[,j])
csv_data$temp_col <- NULL
}
csv_data$daymonth <- NULL
if (safe_output == TRUE){
write_csv(csv_data, paste0(Output, csv_data[[1,1]], "_no_NAs"))
}
else {
write_csv(csv_data, file.path(envrmt$path_data, paste0("csv_", i, "_no_NAs.csv")))
}
};
devtools::load_all()
### Initiate Climodr ###
climodr::hubs("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Output/")
climodr::envi.create("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/")
proc.csv(method = "all", safe_output = TRUE)
prep.csv(method = "all", safe_output = TRUE)
devtools::load_all()
prep.csv(method = "all", safe_output = TRUE)
?write_csv
devtools::load_all()
prep.csv(method = "all", safe_output = TRUE)
devtools::load_all()
prep.csv(method = "all", safe_output = TRUE)
devtools::load_all()
### Initiate Climodr ###
climodr::hubs("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Output/")
climodr::envi.create("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/")
prep.csv(method = "all", safe_output = TRUE)
file.path(envrmt$path_data, paste0("csv_", i, "_no_NAs.csv"))
i = 1
file.path(envrmt$path_data, paste0("csv_", i, "_no_NAs.csv"))
envrmt$path_data
View(envrmt)
file.path(envrmt$path_tmp, paste0("csv_", i, "_no_NAs.csv"))
devtools::load_all()
### Initiate Climodr ###
climodr::hubs("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Input/",
"C:/Users/Alexander/Documents/Uni/HiWi/Test/data/Output/")
climodr::envi.create("C:/Users/Alexander/Documents/Uni/HiWi/Test/data/")
prep.csv(method = "all", safe_output = TRUE)
csv_list <- list();
all_files_in_distribution <- list.files(path = Input, recursive = T); #reads all data in Input-Folder
csv_paths <- grep(".csv$", all_files_in_distribution, value=TRUE);
number_of_csvs <- length(csv_paths);
csv_list <- list();
all_files_in_distribution <- list.files(path = envrmt$path_tmp, recursive = T); #reads all data in Input-Folder
csv_paths <- grep(".csv$", all_files_in_distribution, value=TRUE);
number_of_csvs <- length(csv_paths);
x <- read.csv(csv_paths[i])
x <- read.csv(file.path(envrmt$path_tmp, csv_paths[i]))
View(x)
cn_x <- colnames(x)
number_of_cn <- length(cn_x)
for (j in number_of_cn){
paste0("mm_", cn_x[j]) <- aggregate(cn_x[j] ~ month + year, x, mean)
colnames(paste0("mm_", cn_x[j])) <- c("month","year",paste0("monthly_mean_", cn_x[j]))
paste0("mm_", cn_x[j])$plot <- x[[1,1]]
paste0("mm_", cn_x[j]) <- monthly_mean_Ta_200_BALE001_tubeDB[,c("plot","year","month","monthly_mean_Ta_200")]
}
View(x)
j=1
paste0("mm_", cn_x[j]) <- aggregate(cn_x[j] ~ month + year, x, mean)
?aggregate
View(x)
paste0("mm_", cn_x[j]) <- aggregate(Ta_200 ~ month + year, x, mean)
mm_1 <- aggregate(Ta_200 ~ month + year, x, mean)
paste0("mm_", cn_x[j])
j = 5
paste0("mm_", cn_x[j])
j=6
paste0("mm_", cn_x[j])
View(mm_1)
